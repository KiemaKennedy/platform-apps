apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: argocd
  namespace: argocd
  annotations:
    kubernetes.io/ingress.class: azure/application-gateway
    appgw.ingress.kubernetes.io/backend-path-prefix: "/"
    # Optional niceties:
    # appgw.ingress.kubernetes.io/ssl-redirect: "true"
    # appgw.ingress.kubernetes.io/backend-protocol: "http"   # fits server.insecure=true
spec:
  rules:
  - host: devcluster-kengw.eastus.cloudapp.azure.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: argocd-server
            port:
              number: 80   # you set server.insecure=true, so 80 is correct
# (Optional) TLS with cert-manager if youâ€™ve set up a ClusterIssuer:
#  tls:
#  - hosts: [ <your-agw-dns>.cloudapp.azure.com ]
#    secretName: argocd-tls
